{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u306f\u3058\u3081\u306b","text":"<p>Warning</p> <p>\u3053\u306e\u30b5\u30a4\u30c8\u306b\u63b2\u8f09\u3055\u308c\u3066\u3044\u308b\u3059\u3079\u3066\u306e\u5185\u5bb9\u306f\u79c1\u81ea\u8eab\u306e\u898b\u89e3\u3067\u3042\u308a\u3001\u5fc5\u305a\u3057\u3082\u79c1\u306e\u6240\u5c5e\u7d44\u7e54\u30fb\u4f01\u696d\u306e\u7acb\u5834\u3001\u6226\u7565\u3001\u610f\u898b\u3092\u4ee3\u8868\u3059\u308b\u3082\u306e\u3067\u306f\u3042\u308a\u307e\u305b\u3093\u3002\u516c\u958b\u60c5\u5831\u304a\u3088\u3073\u8457\u8005\u306b\u3088\u308b\u691c\u8a3c\u74b0\u5883\u3092\u30d9\u30fc\u30b9\u306b\u57f7\u7b46\u3057\u3066\u304a\u308a\u307e\u3059\u304c\u3001\u8aa4\u89e3\u30fb\u8aa4\u690d\u3092\u542b\u3093\u3067\u3044\u308b\u53ef\u80fd\u6027\u304c\u3042\u308a\u307e\u3059\u3002\u3054\u5229\u7528\u306e\u969b\u306f\u81ea\u5df1\u8cac\u4efb\u3067\u5fc5\u305a\u6700\u65b0\u306e\u60c5\u5831\u3092\u81ea\u3089\u78ba\u8a8d\u3055\u308c\u307e\u3059\u3088\u3046\u304a\u9858\u3044\u3057\u307e\u3059\u3002</p>"},{"location":"#_1","title":"\u306f\u3058\u3081\u306b","text":""},{"location":"#_2","title":"\u53d6\u308a\u6271\u3046\u5185\u5bb9","text":"<ul> <li>Turbonomic\u306e\u691c\u8a3c<ul> <li>\u5404\u7a2eAPM\u30c4\u30fc\u30eb\u3068\u306e\u63a5\u7d9a</li> <li>\u5404\u7a2ePublic Cloud\u3068\u306e\u63a5\u7d9a</li> <li>VMware\u74b0\u5883\u3068\u306e\u63a5\u7d9a</li> <li>Turbonoimc\u306e\u30dd\u30ea\u30b7\u30fc\u8a2d\u5b9a\u3084\u30a2\u30af\u30b7\u30e7\u30f3\u81ea\u52d5\u5316</li> </ul> </li> <li>Instana<ul> <li>\u672a\u5b9a</li> </ul> </li> <li>FinOps\u306b\u3064\u3044\u3066\u306e\u5b66\u7fd2\u30e1\u30e2</li> <li>Observability\u95a2\u9023\u306e\u96d1\u591a\u306a\u30e1\u30e2</li> </ul>"},{"location":"instana/","title":"Instana\u6982\u8981","text":""},{"location":"instana/#instana-agent-on-iks","title":"Instana Agent on IKS","text":"<p>\u624b\u9806 1. namespace\u3092\u4f5c\u6210\u3059\u308b    <pre><code>kubectl create namespace instana-\n</code></pre> 2. Instana\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u304b\u3089\u5404\u7a2e\u63a5\u7d9a\u60c5\u5831\u3092\u78ba\u8a8d\u3059\u308b    1. Agent Deploy &gt; Kubernetes &gt; Helm 3. Helm Install\u3067\u30a8\u30fc\u30b8\u30a7\u30f3\u30c8\u3092\u30c7\u30d7\u30ed\u30a4\u3059\u308b    <pre><code>helm install instana-agent --namespace instana-agent \\\n --repo https://agents.instana.io/helm \\\n --set agent.key='&lt;your agent key - as described above&gt;' \\\n --set agent.endpointHost='&lt;your host agent endpoint - as described above&gt;' \\\n --set cluster.name='&lt;your-cluster-name&gt;' \\\n --set zone.name='&lt;your-cluster-name&gt;' \\\n instana-agent\n</code></pre></p>"},{"location":"prome-turbo/","title":"prome-turbo","text":""},{"location":"prome-turbo/#prometheusturbonomic","title":"Prometheus\u3068Turbonomic\u306e\u9023\u643a","text":""},{"location":"prome-turbo/#prometurbo","title":"Prometurbo\u3068\u306f","text":"<p>Get metrics from Prometheus for applications, and expose these applications and metrics in JSON format via REST API. The data ingestion framework probe ( i.e. DIF Probe) will access the REST API, convert the JSON output to Turbonomic DTO to be consumed by Turbonomic server. This enables Turbonomic to collect and analyze Prometheus metrics and make intelligent decisions about application scaling, placement and optimization.</p> <p></p> <p>To configure the Prometheus server and map query results into applications and metrics, you need to create the following custom resources in the Kubernetes cluster:</p> <p>PrometheusQueryMapping: allows users to define mappings between Turbonomic entities (such as ApplicationComponents, Services, or VirtualMachines) and Prometheus metrics exposed by different prometheus exporters. PrometheusServerConfig: specifies the address of the Prometheus server, as well as optional label selectors to filter out PrometheusQueryMapping resources applicable to that server. This allows users to configure multiple Prometheus servers and use different mappings for each server. Custom resource definitions for the above two resources must be installed first in the Kubernetes cluster. Get them here.</p> <p>Sample custom resource instances can be found here.</p> <p>Output of Prometurbo: Applications with their metrics The application metrics are served via REST API at endpoint /metrics. The output JSON format is defined at turbo-go-sdk: <pre><code>type Topology struct {\nVersion    string       `json:\"version\"`\nUpdatetime int64        `json:\"updateTime\"`\nScope      string       `json:\"scope\"`\nSource     string       `json:\"source\"`\nEntities   []*DIFEntity `json:\"topology\"`\n}\n</code></pre> <code>``go type DIFEntity struct {     UID                 string</code>json:\"uniqueId\"<code>Type                string</code>json:\"type\"<code>Name                string</code>json:\"name\"<code>HostedOn            *DIFHostedOn</code>json:\"hostedOn\"<code>MatchingIdentifiers *DIFMatchingIdentifiers</code>json:\"matchIdentifiers\"<code>PartOf              []*DIFPartOf</code>json:\"partOf\"<code>Metrics             map[string][]*DIFMetricVal</code>json:\"metrics\"`     partOfSet           set.Set     hostTypeSet         set.Set }</p> <p>Follow the deployment instructions at here to deploy Prometurbo and DIFProbe container in the same Pod.</p>"},{"location":"prometheus/","title":"Prometheus\u306e\u8a2d\u5b9a","text":"<p>Prometheus\u306f\u3001\u9ad8\u30b9\u30b1\u30fc\u30e9\u30d6\u30eb\u306a\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u30e2\u30cb\u30bf\u30ea\u30f3\u30b0\u30d5\u30ec\u30fc\u30e0\u30ef\u30fc\u30af\u3067\u3059\u3002Kubernetes\u30b3\u30f3\u30c6\u30ca\u30aa\u30fc\u30b1\u30b9\u30c8\u30ec\u30fc\u30b7\u30e7\u30f3\u30d7\u30e9\u30c3\u30c8\u30d5\u30a9\u30fc\u30e0\u306e\u305f\u3081\u306e\u30a2\u30a6\u30c8\u30aa\u30d6\u30dc\u30c3\u30af\u30b9\u306e\u76e3\u8996\u6a5f\u80fd\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u307e\u305f\u3001\u89b3\u6e2c\u53ef\u80fd\u306a\u9818\u57df\u3067\u306f\u3001\u30e1\u30c8\u30ea\u30af\u30b9\u3068\u30a2\u30e9\u30fc\u30c8\u3092\u652f\u63f4\u3059\u308b\u305f\u3081\u3001\u5927\u304d\u306a\u4eba\u6c17\u3092\u96c6\u3081\u3066\u3044\u307e\u3059\u3002</p> <p>\u91cd\u8981\u306a\u30dd\u30a4\u30f3\u30c85\u3064</p> <ol> <li>\u30e1\u30c8\u30ea\u30c3\u30af\u306e\u53ce\u96c6\uff1a Prometheus\u3067\u306f\u3001Pull\u30e2\u30c7\u30eb\u3092\u4f7f\u3063\u3066\u3001HTTP\u3067\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002Prometheus\u304c\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u30b9\u30af\u30ec\u30a4\u30d4\u30f3\u30b0\u3067\u304d\u306a\u3044\u30e6\u30fc\u30b9\u30b1\u30fc\u30b9\u306b\u306f\u3001Pushgateway\u3092\u4f7f\u3063\u3066Prometheus\u306b\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u30d7\u30c3\u30b7\u30e5\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308a\u307e\u3059\u3002\u4f8b\u3048\u3070\u3001\u77ed\u6642\u9593\u306ekubernetes\u30b8\u30e7\u30d6\u3084Cronjob\u304b\u3089\u30ab\u30b9\u30bf\u30e0\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u53ce\u96c6\u3059\u308b\u3088\u3046\u306a\u4f8b\u3067\u3059\u3002</li> <li>\u30e1\u30c8\u30ea\u30af\u30b9\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8 Prometheus\u3092\u4f7f\u3063\u3066\u76e3\u8996\u3057\u305f\u3044\u30b7\u30b9\u30c6\u30e0\u306f\u3001/metrics\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u306b\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u516c\u958b\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002Prometheus\u306f\u3001\u3053\u306e\u30a8\u30f3\u30c9\u30dd\u30a4\u30f3\u30c8\u3092\u4f7f\u7528\u3057\u3066\u3001\u5b9a\u671f\u7684\u306b\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u53d6\u5f97\u3057\u307e\u3059\u3002</li> <li>PromQL\uff1a Prometheus\u306b\u306fPromQL\u3068\u3044\u3046\u975e\u5e38\u306b\u67d4\u8edf\u306a\u30af\u30a8\u30ea\u8a00\u8a9e\u304c\u4ed8\u5c5e\u3057\u3066\u304a\u308a\u3001Prometheus\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u3067\u30e1\u30c8\u30ea\u30af\u30b9\u3092\u7167\u4f1a\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3059\u308b\u3053\u3068\u304c\u3067\u304d\u307e\u3059\u3002\u307e\u305f\u3001PromQL\u30af\u30a8\u30ea\u306f\u3001Prometheus UI\u3068Grafana\u3067\u30e1\u30c8\u30ea\u30c3\u30af\u30b9\u3092\u53ef\u8996\u5316\u3059\u308b\u305f\u3081\u306b\u4f7f\u7528\u3055\u308c\u307e\u3059\u3002</li> <li>Prometheus Exporters\uff08\u30d7\u30ed\u30e1\u30c6\u30a6\u30b9\u30fb\u30a8\u30af\u30b9\u30dd\u30fc\u30bf\u30fc\uff09\uff1a Exporters \u306f\u3001\u30b5\u30fc\u30c9\u30d1\u30fc\u30c6\u30a3\u30a2\u30d7\u30ea\u306e\u65e2\u5b58\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u3092 Prometheus \u306e\u30e1\u30c8\u30ea\u30af\u30b9\u5f62\u5f0f\u306b\u5909\u63db\u3059\u308b\u30e9\u30a4\u30d6\u30e9\u30ea\u3067\u3059\u3002\u591a\u304f\u306e\u516c\u5f0f\u304a\u3088\u3073\u30b3\u30df\u30e5\u30cb\u30c6\u30a3\u306ePrometheus\u30a8\u30af\u30b9\u30dd\u30fc\u30bf\u30fc\u304c\u5b58\u5728\u3057\u307e\u3059\u3002\u4e00\u4f8b\u3068\u3057\u3066\u3001Prometheus\u30ce\u30fc\u30c9\u30a8\u30af\u30b9\u30dd\u30fc\u30bf\u30fc\u304c\u3042\u308a\u307e\u3059\u3002\u3053\u308c\u306f\u3001\u3059\u3079\u3066\u306eLinux\u30b7\u30b9\u30c6\u30e0\u30ec\u30d9\u30eb\u306e\u30e1\u30c8\u30ea\u30af\u30b9\u3092Prometheus\u30d5\u30a9\u30fc\u30de\u30c3\u30c8\u3067\u516c\u958b\u3059\u308b\u3082\u306e\u3067\u3059\u3002</li> <li>TSDB\uff08\u6642\u7cfb\u5217\u30c7\u30fc\u30bf\u30d9\u30fc\u30b9\uff09\uff1a Prometheus\u306f\u3001\u3059\u3079\u3066\u306e\u30c7\u30fc\u30bf\u3092\u52b9\u7387\u7684\u306b\u4fdd\u5b58\u3059\u308b\u305f\u3081\u306bTSDB\u3092\u4f7f\u7528\u3057\u307e\u3059\u3002\u30c7\u30d5\u30a9\u30eb\u30c8\u3067\u306f\u3001\u3059\u3079\u3066\u306e\u30c7\u30fc\u30bf\u306f\u30ed\u30fc\u30ab\u30eb\u306b\u4fdd\u5b58\u3055\u308c\u307e\u3059\u3002\u3057\u304b\u3057\u3001\u5358\u4e00\u969c\u5bb3\u70b9\u3092\u907f\u3051\u308b\u305f\u3081\u306b\u3001Prometheus\u306eTSDB\u306b\u30ea\u30e2\u30fc\u30c8\u30b9\u30c8\u30ec\u30fc\u30b8\u3092\u7d71\u5408\u3059\u308b\u30aa\u30d7\u30b7\u30e7\u30f3\u304c\u3042\u308a\u307e\u3059\u3002  </li> </ol> <p>kubernetes\u306b\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u30b3\u30f3\u30dd\u30fc\u30cd\u30f3\u30c8</p> <ol> <li><code>kubernetes-apiservers</code>: API servers\u304b\u3089\u3059\u3079\u3066\u306e\u30e1\u30c8\u30ea\u30c3\u30af\u3092\u53d6\u5f97\u3059\u308b.</li> <li><code>kubernetes-nodes</code>: kubernetes Node\u306e\u30e1\u30c8\u30ea\u30c3\u30af\u3092\u53d6\u5f97\u3059\u308b</li> <li><code>kubernetes-pods</code>: All the pod metrics get discovered if the pod metadata is annotated with\u00a0<code>prometheus.io/scrape</code>\u00a0and\u00a0<code>prometheus.io/port</code>\u00a0annotations.</li> <li><code>kubernetes-cadvisor</code>: cAdvisor \u30e1\u30c8\u30ea\u30c3\u30af\u3092\u53d6\u5f97\u3059\u308b.</li> <li><code>kubernetes-service-endpoints</code>: All the Service endpoints are scrapped if the service metadata is annotated with prometheus.io/scrape and prometheus.io/port annotations. It can be used for black-box monitoring.</li> </ol> <p><code>prometheus.rules</code>\u00a0contains all the alert rules for sending alerts to the Alertmanager.</p>"},{"location":"prometheus/#on-kubernetes","title":"\u30c7\u30d7\u30ed\u30a4\u624b\u9806 on Kubernetes","text":"<p>OpenShift\u306f\u6a19\u6e96\u88c5\u5099\u3067\u3059\u304c\u3001Kubernetes\u306e\u5834\u5408\u306f\u5225\u9014\u30c7\u30d7\u30ed\u30a4\u3059\u308b\u5fc5\u8981\u304c\u3042\u308a\u307e\u3059\u3002</p> <ol> <li>\u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u5165\u624b<ol> <li>https://github.com/coreos/kube-prometheus</li> <li>/manifest \u306e\u4e2d\u306eprometheus\u95a2\u9023\u306e\u3082\u306e\u3060\u3051\u4f7f\u3046</li> <li>\u5168\u90e8\u307e\u3068\u3081\u3066apply\u3059\u308b\u3068AlertManager\u3084Grafana\u3082\u5165\u308b\u304c\u3001IKS\u7121\u511f\u67a0\u3060\u3068\u30b9\u30da\u30c3\u30af\u304c\u8db3\u308a\u306a\u3044\u305f\u3081Prometheus\u3060\u3051\u306b\u3059\u308b</li> </ol> </li> <li>Namespace\u4f5c\u6210\u3002\u540d\u524d\u306fMonitoring\u306b\u3059\u308b\u3002    <pre><code>kubectl create namespace monitoring\n</code></pre></li> <li>ClusterRole, Configmap, Deployment\u3092\u4fee\u6b63\u3057\u3066apply\u3057\u3066\u3044\u304f     <pre><code>kubectl create -f config-map.yaml\nkubectl create -f clusterRole.yaml\nkubectl create  -f prometheus-deployment.yaml\n</code></pre></li> <li>Prometheus\u306e\u30c0\u30c3\u30b7\u30e5\u30dc\u30fc\u30c9\u306b\u30a2\u30af\u30bb\u30b9\u3057\u305f\u3044\u306e\u3067NodePort\u3092\u4f5c\u308b\u3002</li> </ol> <pre><code>kubectl port-forward prometheus-deployment 8080:9090 -n monitoring\n</code></pre> <p>ClusterIP : NodePort\u3067\u30a2\u30af\u30bb\u30b9\u3057\u3066\u307f\u308b\u3002http://169.51.194.202:30000/graph</p>"},{"location":"turbonomic/","title":"Turbonomi\uff43\u6982\u8981","text":""}]}